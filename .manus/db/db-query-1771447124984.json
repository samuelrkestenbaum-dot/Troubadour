{
  "query": "\nCREATE TABLE IF NOT EXISTS `skillProgression` (\n  `id` int AUTO_INCREMENT PRIMARY KEY,\n  `userId` int NOT NULL,\n  `trackId` int NOT NULL,\n  `reviewId` int NOT NULL,\n  `focusMode` varchar(50) NOT NULL,\n  `dimension` varchar(100) NOT NULL,\n  `score` int NOT NULL,\n  `genre` varchar(100),\n  `createdAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  INDEX `idx_skillProg_userId` (`userId`),\n  INDEX `idx_skillProg_userId_dimension` (`userId`, `dimension`),\n  INDEX `idx_skillProg_userId_focusMode` (`userId`, `focusMode`),\n  INDEX `idx_skillProg_createdAt` (`createdAt`),\n  FOREIGN KEY (`userId`) REFERENCES `users`(`id`) ON DELETE CASCADE,\n  FOREIGN KEY (`trackId`) REFERENCES `tracks`(`id`) ON DELETE CASCADE,\n  FOREIGN KEY (`reviewId`) REFERENCES `reviews`(`id`) ON DELETE CASCADE\n);\n\nCREATE TABLE IF NOT EXISTS `genreBenchmarkStats` (\n  `id` int AUTO_INCREMENT PRIMARY KEY,\n  `genre` varchar(100) NOT NULL,\n  `focusMode` varchar(50) NOT NULL,\n  `dimension` varchar(100) NOT NULL,\n  `p25` int NOT NULL,\n  `p50` int NOT NULL,\n  `p75` int NOT NULL,\n  `p90` int NOT NULL,\n  `mean` int NOT NULL,\n  `sampleSize` int NOT NULL,\n  `updatedAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n  UNIQUE INDEX `uq_genreBench_genre_focus_dim` (`genre`, `focusMode`, `dimension`),\n  INDEX `idx_genreBench_genre` (`genre`)\n);\n\nCREATE TABLE IF NOT EXISTS `releaseReadiness` (\n  `id` int AUTO_INCREMENT PRIMARY KEY,\n  `trackId` int NOT NULL,\n  `userId` int NOT NULL,\n  `overallSignal` enum('green','yellow','red') NOT NULL,\n  `overallScore` int NOT NULL,\n  `dimensionSignals` json NOT NULL,\n  `blockers` json NOT NULL,\n  `analysisJson` json NOT NULL,\n  `createdAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  INDEX `idx_releaseReady_trackId` (`trackId`),\n  INDEX `idx_releaseReady_userId` (`userId`),\n  FOREIGN KEY (`trackId`) REFERENCES `tracks`(`id`) ON DELETE CASCADE,\n  FOREIGN KEY (`userId`) REFERENCES `users`(`id`) ON DELETE CASCADE\n);\n\nCREATE TABLE IF NOT EXISTS `userStreaks` (\n  `id` int AUTO_INCREMENT PRIMARY KEY,\n  `userId` int NOT NULL,\n  `currentStreak` int NOT NULL DEFAULT 0,\n  `longestStreak` int NOT NULL DEFAULT 0,\n  `lastActivityDate` varchar(10),\n  `totalUploads` int NOT NULL DEFAULT 0,\n  `totalReviews` int NOT NULL DEFAULT 0,\n  `weeklyUploadGoal` int NOT NULL DEFAULT 2,\n  `updatedAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n  UNIQUE INDEX `uq_userStreaks_userId` (`userId`),\n  FOREIGN KEY (`userId`) REFERENCES `users`(`id`) ON DELETE CASCADE\n);\n\nCREATE TABLE IF NOT EXISTS `artistDNA` (\n  `id` int AUTO_INCREMENT PRIMARY KEY,\n  `userId` int NOT NULL,\n  `dnaJson` json NOT NULL,\n  `trackCount` int NOT NULL,\n  `generatedAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  INDEX `idx_artistDNA_userId` (`userId`),\n  FOREIGN KEY (`userId`) REFERENCES `users`(`id`) ON DELETE CASCADE\n);\n\nCREATE TABLE IF NOT EXISTS `genreClusters` (\n  `id` int AUTO_INCREMENT PRIMARY KEY,\n  `genre` varchar(100) NOT NULL,\n  `subgenre` varchar(100),\n  `archetypeJson` json NOT NULL,\n  `sampleSize` int NOT NULL,\n  `updatedAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n  UNIQUE INDEX `uq_genreClusters_genre_sub` (`genre`, `subgenre`),\n  INDEX `idx_genreClusters_genre` (`genre`)\n);\n\nCREATE TABLE IF NOT EXISTS `artistArchetypes` (\n  `id` int AUTO_INCREMENT PRIMARY KEY,\n  `userId` int NOT NULL,\n  `archetypeJson` json NOT NULL,\n  `clusterLabel` varchar(100) NOT NULL,\n  `confidence` int NOT NULL,\n  `updatedAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n  UNIQUE INDEX `uq_artistArch_userId` (`userId`),\n  FOREIGN KEY (`userId`) REFERENCES `users`(`id`) ON DELETE CASCADE\n);\n",
  "command": "mysql --batch --raw --column-names --default-character-set=utf8mb4 --host gateway02.us-east-1.prod.aws.tidbcloud.com --port 4000 --user 2yoFfYif5LNxbni.536e2831ff0e --database ZpobkhoyuogEaApEUcL3SK --execute \nCREATE TABLE IF NOT EXISTS `skillProgression` (\n  `id` int AUTO_INCREMENT PRIMARY KEY,\n  `userId` int NOT NULL,\n  `trackId` int NOT NULL,\n  `reviewId` int NOT NULL,\n  `focusMode` varchar(50) NOT NULL,\n  `dimension` varchar(100) NOT NULL,\n  `score` int NOT NULL,\n  `genre` varchar(100),\n  `createdAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  INDEX `idx_skillProg_userId` (`userId`),\n  INDEX `idx_skillProg_userId_dimension` (`userId`, `dimension`),\n  INDEX `idx_skillProg_userId_focusMode` (`userId`, `focusMode`),\n  INDEX `idx_skillProg_createdAt` (`createdAt`),\n  FOREIGN KEY (`userId`) REFERENCES `users`(`id`) ON DELETE CASCADE,\n  FOREIGN KEY (`trackId`) REFERENCES `tracks`(`id`) ON DELETE CASCADE,\n  FOREIGN KEY (`reviewId`) REFERENCES `reviews`(`id`) ON DELETE CASCADE\n);\n\nCREATE TABLE IF NOT EXISTS `genreBenchmarkStats` (\n  `id` int AUTO_INCREMENT PRIMARY KEY,\n  `genre` varchar(100) NOT NULL,\n  `focusMode` varchar(50) NOT NULL,\n  `dimension` varchar(100) NOT NULL,\n  `p25` int NOT NULL,\n  `p50` int NOT NULL,\n  `p75` int NOT NULL,\n  `p90` int NOT NULL,\n  `mean` int NOT NULL,\n  `sampleSize` int NOT NULL,\n  `updatedAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n  UNIQUE INDEX `uq_genreBench_genre_focus_dim` (`genre`, `focusMode`, `dimension`),\n  INDEX `idx_genreBench_genre` (`genre`)\n);\n\nCREATE TABLE IF NOT EXISTS `releaseReadiness` (\n  `id` int AUTO_INCREMENT PRIMARY KEY,\n  `trackId` int NOT NULL,\n  `userId` int NOT NULL,\n  `overallSignal` enum('green','yellow','red') NOT NULL,\n  `overallScore` int NOT NULL,\n  `dimensionSignals` json NOT NULL,\n  `blockers` json NOT NULL,\n  `analysisJson` json NOT NULL,\n  `createdAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  INDEX `idx_releaseReady_trackId` (`trackId`),\n  INDEX `idx_releaseReady_userId` (`userId`),\n  FOREIGN KEY (`trackId`) REFERENCES `tracks`(`id`) ON DELETE CASCADE,\n  FOREIGN KEY (`userId`) REFERENCES `users`(`id`) ON DELETE CASCADE\n);\n\nCREATE TABLE IF NOT EXISTS `userStreaks` (\n  `id` int AUTO_INCREMENT PRIMARY KEY,\n  `userId` int NOT NULL,\n  `currentStreak` int NOT NULL DEFAULT 0,\n  `longestStreak` int NOT NULL DEFAULT 0,\n  `lastActivityDate` varchar(10),\n  `totalUploads` int NOT NULL DEFAULT 0,\n  `totalReviews` int NOT NULL DEFAULT 0,\n  `weeklyUploadGoal` int NOT NULL DEFAULT 2,\n  `updatedAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n  UNIQUE INDEX `uq_userStreaks_userId` (`userId`),\n  FOREIGN KEY (`userId`) REFERENCES `users`(`id`) ON DELETE CASCADE\n);\n\nCREATE TABLE IF NOT EXISTS `artistDNA` (\n  `id` int AUTO_INCREMENT PRIMARY KEY,\n  `userId` int NOT NULL,\n  `dnaJson` json NOT NULL,\n  `trackCount` int NOT NULL,\n  `generatedAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,\n  INDEX `idx_artistDNA_userId` (`userId`),\n  FOREIGN KEY (`userId`) REFERENCES `users`(`id`) ON DELETE CASCADE\n);\n\nCREATE TABLE IF NOT EXISTS `genreClusters` (\n  `id` int AUTO_INCREMENT PRIMARY KEY,\n  `genre` varchar(100) NOT NULL,\n  `subgenre` varchar(100),\n  `archetypeJson` json NOT NULL,\n  `sampleSize` int NOT NULL,\n  `updatedAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n  UNIQUE INDEX `uq_genreClusters_genre_sub` (`genre`, `subgenre`),\n  INDEX `idx_genreClusters_genre` (`genre`)\n);\n\nCREATE TABLE IF NOT EXISTS `artistArchetypes` (\n  `id` int AUTO_INCREMENT PRIMARY KEY,\n  `userId` int NOT NULL,\n  `archetypeJson` json NOT NULL,\n  `clusterLabel` varchar(100) NOT NULL,\n  `confidence` int NOT NULL,\n  `updatedAt` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n  UNIQUE INDEX `uq_artistArch_userId` (`userId`),\n  FOREIGN KEY (`userId`) REFERENCES `users`(`id`) ON DELETE CASCADE\n);\n",
  "rows": [],
  "messages": [],
  "stdout": "",
  "stderr": "",
  "execution_time_ms": 2056
}